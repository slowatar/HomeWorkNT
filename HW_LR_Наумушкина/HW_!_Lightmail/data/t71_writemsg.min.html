(self.webpackChunklight=self.webpackChunklight||[]).push([[574],{498:function(__unused_webpack_module,exports,__webpack_require__){"use strict";__webpack_require__(242);var $=__webpack_require__(330);$((function(){var $form=$("#sentmsgcomposeForm"),data=window.addressbook||[];$form[0]&&($(".js-input-expand",$form).each((function(){$.Autocompleter.addressbook(this),$(this).setOptions({data:data})})),$(".js-cc-bcc-activate").click((function(e){e.preventDefault(),$(".js-cc-text").removeClass("hide-for-js"),$(".js-bcc-text").removeClass("hide-for-js"),$(this).parents(".js-cc-bcc-parent").remove()})))}))},242:function(__unused_webpack_module,exports,__webpack_require__){"use strict";exports.__esModule=!0;var _ru2en,_en2ru,$=__webpack_require__(330);$.fn.extend({autocomplete:function(urlOrData,options){var isUrl="string"==typeof urlOrData;return(options=$.extend({},$.Autocompleter.defaults,{url:isUrl?urlOrData:null,data:isUrl?null:urlOrData,delay:isUrl?$.Autocompleter.defaults.delay:10,max:options&&!options.scroll?10:150},options)).highlight=options.highlight||function(value){return value},options.formatMatch=options.formatMatch||options.formatItem,this.each((function(){new $.Autocompleter(this,options)}))},result:function(handler){return this.bind("result",handler)},search:function(handler){return this.trigger("search",[handler])},flushCache:function(){return this.trigger("flushCache")},setOptions:function(options){return this.trigger("setOptions",[options])},unautocomplete:function(){return this.trigger("unautocomplete")}}),$.Autocompleter=function(input,options){var timeout,lastKeyPressCode,KEY_UP=38,KEY_DOWN=40,KEY_DEL=46,KEY_TAB=9,KEY_RETURN=13,KEY_ESC=27,KEY_PAGEUP=33,KEY_PAGEDOWN=34,KEY_BACKSPACE=8,$input=$(input).attr("autocomplete","off").addClass(options.inputClass),previousValue="",cache=$.Autocompleter.Cache(options),hasFocus=0,caretPos={start:0,end:0},config={mouseDownOnSelect:!1},select=$.Autocompleter.Select(options,input,selectCurrent,config);function selectCurrent(){var selected=select.selected();if(!selected)return!1;var v=selected.result;if(previousValue=v,options.multiple){var value=$input.val(),a=$.grep(trimWords(value.substr(0,caretPos.start)),$.trim),b=$.grep(trimWords(value.substr(caretPos.end)),$.trim);a[a.length-1]=v,v=a.concat(b).join(options.multipleSeparator)+options.multipleSeparator}return $input.val(v),$.Autocompleter.Selection(input,input.value.length,input.value.length),hideResultsNow(),$input.trigger("result",[selected.data,selected.value]),!0}function onChange(crap,skipPrevCheck){if(lastKeyPressCode!=KEY_DEL){var value,currentValue=$input.val();if(skipPrevCheck||currentValue!=previousValue)previousValue=currentValue,options.multiple?(value=currentValue,caretPos=$.Autocompleter.getCaretPosition(input),currentValue=lastWord(value.substr(0,caretPos.start))):currentValue=lastWord(currentValue),currentValue&&currentValue.length>=options.minChars?($input.addClass(options.loadingClass),options.matchCase||(currentValue=currentValue.toLowerCase()),request(currentValue,receiveData,hideResultsNow)):(stopLoading(),select.hide())}else select.hide()}function trimWords(value){var o,i,l,a=value.match(/".*?"/g)||[],r=[];for(i=0,l=a.length;i<l;i++)o={from:a[i],to:a[i].replace(options.multipleSeparatorPattern,"_")},value=value.replace(o.from,o.to),r.push(o);var r2=value.split(options.multipleSeparatorPattern);for(i=0,l=r2.length;i<l;i++){for(var i2=0,l2=r.length;i2<l2;i2++)r2[i]=r2[i].replace(r[i2].to,r[i2].from);r2[i]=$.trim(r2[i])}return r2}function lastWord(value){if(!options.multiple)return value;var words=trimWords(value);return words[words.length-1]}function hideResultsNow(){select.visible();select.hide(),clearTimeout(timeout),stopLoading(),options.mustMatch&&$input.search((function(result){if(!result)if(options.multiple){var words=trimWords($input.val()).slice(0,-1);$input.val(words.join(options.multipleSeparator)+(words.length?options.multipleSeparator:""))}else $input.val("")}))}function receiveData(q,data){data?(options.filter&&(data=$.grep(data,options.filter,!1)),data.length&&hasFocus?(stopLoading(),select.display(data,q),function(q,sValue){options.autoFill&&lastWord($input.val()).toLowerCase()==q.toLowerCase()&&lastKeyPressCode!=KEY_BACKSPACE&&($input.val($input.val()+sValue.substring(lastWord(previousValue).length)),$.Autocompleter.Selection(input,previousValue.length,previousValue.length+sValue.length))}(q,data[0].value),select.show()):hideResultsNow()):hideResultsNow()}function request(term,success,failure){options.matchCase||(term=term.toLowerCase());var data=cache.load(term);if($.isArray(data))success(term,data);else if("string"==typeof options.url&&options.url.length>0){var extraParams={timestamp:+new Date};$.each(options.extraParams,(function(key,param){extraParams[key]="function"==typeof param?param():param}));var params={mode:"abort",port:"autocomplete"+input.name,dataType:options.dataType,url:options.url,data:$.extend({limit:options.max},extraParams),success:function(data){var parsed=options.parse&&options.parse(data)||function(data){for(var parsed=[],rows=data.split("\n"),i=0;i<rows.length;i++){var row=$.trim(rows[i]);row&&(row=row.split("|"),parsed[parsed.length]={data:row,value:row[0],result:options.formatResult&&options.formatResult(row,row[0])||row[0]})}return parsed}(data);cache.add(term,parsed),success(term,parsed)}};params.data[options.queryVarName]=options.prepareQuery(lastWord(term)),$.ajax(params)}else select.emptyList(),failure(term)}function stopLoading(){$input.removeClass(options.loadingClass)}$input.bind((/Opera/i.test(navigator.userAgent)?"keypress":"keydown")+".autocomplete",(function(event){switch(lastKeyPressCode=event.keyCode,event.keyCode){case KEY_UP:select.visible()?(event.preventDefault(),select.prev()):onChange(0,!0);break;case KEY_DOWN:select.visible()?(event.preventDefault(),select.next()):onChange(0,!0);break;case KEY_PAGEUP:select.visible()?(event.preventDefault(),select.pageUp()):onChange(0,!0);break;case KEY_PAGEDOWN:select.visible()?(event.preventDefault(),select.pageDown()):onChange(0,!0);break;case KEY_TAB:case KEY_RETURN:if(selectCurrent())return event.preventDefault(),!1;break;case KEY_ESC:select.hide();break;default:caretPos=$.Autocompleter.getCaretPosition(input),clearTimeout(timeout),timeout=setTimeout(onChange,options.delay)}})).focus((function(){caretPos=$.Autocompleter.getCaretPosition(input),hasFocus++})).blur((function(){if(hasFocus=0,config.mouseDownOnSelect||(clearTimeout(timeout),timeout=setTimeout(hideResultsNow,200)),options.multiple){var list=$.grep(trimWords($input.val()),$.trim);$input.val(list.join(options.multipleSeparator)).change()}})).click((function(){caretPos=$.Autocompleter.getCaretPosition(input),hasFocus++>1&&!select.visible()&&onChange(0,!0)})).bind("search",(function(){var fn=arguments.length>1?arguments[1]:null;function findValueCallback(q,data){var result;if(data&&data.length)for(var i=0;i<data.length;i++)if(data[i].result.toLowerCase()==q.toLowerCase()){result=data[i];break}"function"==typeof fn?fn(result):$input.trigger("result",result&&[result.data,result.value])}$.each(trimWords($input.val()),(function(i,value){request(value,findValueCallback,findValueCallback)}))})).bind("flushCache",(function(){cache.flush()})).bind("setOptions",(function(){$.extend(options,arguments[1]),"data"in arguments[1]&&cache.populate(),hasFocus&&$input.click()})).bind("unautocomplete",(function(){select.unbind(),$input.unbind(),$(input.form).unbind(".autocomplete")})),$.Autocompleter.trimWords=trimWords},$.Autocompleter.defaults={prepareQuery:function(term){return term},queryVarName:"q",parent:document.body,inputClass:"ac_input",resultsClass:"ac_results",loadingClass:"ac_loading",minChars:1,delay:400,matchCase:!1,matchSubset:!0,matchContains:!1,cacheLength:10,max:10,mustMatch:!1,extraParams:{},selectFirst:!0,formatItem:function(row){return row[0]},formatMatch:null,autoFill:!1,width:0,multiple:!1,multipleSeparator:", ",highlight:function(value,term){return value.replace(new RegExp("(?![^&;]+;)(?!<[^<>]*)("+term.replace(/([\^\$\(\)\[\]\{\}\*\.\+\?\|\\])/gi,"\\$1")+")(?![^<>]*>)(?![^&;]+;)","gi"),"<strong>$1</strong>")},scroll:!1,scrollHeight:180},$.Autocompleter.Cache=function(options){var data={},length=0;function matchSubset(s,sub){options.matchCase||(s=s.toLowerCase(),sub=sub.toLowerCase());var i=s.indexOf(sub);return"word"==options.matchContains&&s.replace(/^"?(.*?)"?\s+<(.*?)>$/,(function(m0,m1,m2){if(0!==(i=m1.indexOf(sub))){for(var nameParts=m1.split(" "),j=1;0!==i&&j<nameParts.length;)i=nameParts[j].indexOf(sub),j++;0!==i&&(i=m2.indexOf(sub))}})),-1!=i&&0==i}function add(q,value){length>options.cacheLength&&flush(),data[q]||length++,data[q]=value}function populate(){if(!options.data)return!1;var stMatchSets={},nullData=0;options.url||(options.cacheLength=1),stMatchSets[""]=[];for(var i=0,ol=options.data.length;i<ol;i++){var rawValue=options.data[i];rawValue="string"==typeof rawValue?[rawValue]:rawValue;var value=options.formatMatch(rawValue,i+1,options.data.length);if(!1!==value){var firstChar=value.charAt(0).toLowerCase();stMatchSets[firstChar]||(stMatchSets[firstChar]=[]);var row={value:value,data:rawValue,result:options.formatResult&&options.formatResult(rawValue)||value};stMatchSets[firstChar].push(row),nullData++<options.max&&stMatchSets[""].push(row)}}$.each(stMatchSets,(function(i,value){options.cacheLength++,add(i,value)}))}function flush(){data={},length=0}return setTimeout(populate,25),{flush:flush,add:add,populate:populate,load:function(q){if(!options.cacheLength||!length)return null;if(!options.url&&options.matchContains){var tr,csub=[];for(var k in data)if(k.length>0){var c=data[k];$.each(c,(function(i,x){(matchSubset(x.value,q)||(tr=$.Autocompleter.Translit(q))&&matchSubset(x.value,tr)||(tr=$.Autocompleter.Translit(q,!0))&&matchSubset(x.value,tr))&&csub.push(x)}))}return csub}if(data[q])return data[q];if(options.matchSubset)for(var i=q.length-1;i>=options.minChars;i--){if(c=data[q.substr(0,i)]){csub=[];return $.each(c,(function(i,x){matchSubset(x.value,q)&&(csub[csub.length]=x)})),csub}}return null}}},$.Autocompleter.Select=function(options,input,select,config){var listItems,data,element,list,CLASSES_ACTIVE="ac_over",active=-1,term="",needsInit=!0;function target(event){for(var element=event.target;element&&"LI"!=element.tagName;)element=element.parentNode;return element||[]}function moveSelect(step){listItems.slice(active,active+1).removeClass(CLASSES_ACTIVE),function(step){(active+=step)<0?active=listItems.size()-1:active>=listItems.size()&&(active=0)}(step);var activeItem=listItems.slice(active,active+1).addClass(CLASSES_ACTIVE);if(options.scroll){var offset=0;listItems.slice(0,active).each((function(){offset+=this.offsetHeight})),offset+activeItem[0].offsetHeight-list.scrollTop()>list[0].clientHeight?list.scrollTop(offset+activeItem[0].offsetHeight-list.innerHeight()):offset<list.scrollTop()&&list.scrollTop(offset)}}function fillList(){list.empty();for(var available,substr,str,max=(available=data.length,options.max&&options.max<available?options.max:available),i=0;i<max;i++)if(data[i]){var formatted=options.formatItem(data[i].data,i+1,max,data[i].value,term);if(!1!==formatted){var translit=(str=formatted,substr=(substr=term).toLowerCase(),-1===(str=function(str){var wordArr=str.match(/\S+/g);return wordArr.pop(),wordArr.join(" ")}(str.toLowerCase())).indexOf(substr)),li=$("<li/>").html(options.highlight(formatted,term,translit)).addClass(i%2==0?"ac_even":"ac_odd").appendTo(list)[0];$.data(li,"ac_data",data[i])}}listItems=list.find("li"),options.selectFirst&&(listItems.slice(0,1).addClass(CLASSES_ACTIVE),active=0),$.fn.bgiframe&&list.bgiframe()}return{display:function(d,q){needsInit&&(element=$("<div/>").addClass(options.resultsClass).appendTo(options.parent),options.parent.is("BODY")?element.css("position","absolute").hide():options.parent.hide(),list=$("<ul/>").appendTo(element).mouseover((function(event){target(event).nodeName&&"LI"==target(event).nodeName.toUpperCase()&&(active=$("li",list).removeClass(CLASSES_ACTIVE).index(target(event)),$(target(event)).addClass(CLASSES_ACTIVE))})).click((function(event){return $(target(event)).addClass(CLASSES_ACTIVE),select(),input.focus(),!1})).mousedown((function(){config.mouseDownOnSelect=!0})).mouseup((function(){config.mouseDownOnSelect=!1})),options.width>0&&element.css("width",options.width),needsInit=!1),data=d,term=q,fillList()},next:function(){moveSelect(1)},prev:function(){moveSelect(-1)},pageUp:function(){moveSelect(0!=active&&active-8<0?-active:-8)},pageDown:function(){active!=listItems.size()-1&&active+8>listItems.size()?moveSelect(listItems.size()-1-active):moveSelect(8)},hide:function(){options.parent.is("BODY")?element&&element.hide():options.parent.hide(),listItems&&listItems.removeClass(CLASSES_ACTIVE),active=-1},visible:function(){return element&&element.is(":visible")},current:function(){return this.visible()&&(listItems.filter("."+CLASSES_ACTIVE)[0]||options.selectFirst&&listItems[0])},show:function(){var offset=$(input).offset();if(options.parent.is("BODY")?element.css({width:"string"==typeof options.width||options.width>0?options.width:$(input).width(),top:offset.top+input.offsetHeight,left:offset.left}).show():options.parent.show(),options.scroll&&(list.scrollTop(0),list.css({maxHeight:options.scrollHeight,overflow:"auto"}),$.browser.msie&&void 0===document.body.style.maxHeight)){var listHeight=0;listItems.each((function(){listHeight+=this.offsetHeight}));var scrollbarsVisible=listHeight>options.scrollHeight;list.css("height",scrollbarsVisible?options.scrollHeight:listHeight),scrollbarsVisible||listItems.width(list.width()-parseInt(listItems.css("padding-left"))-parseInt(listItems.css("padding-right")))}},selected:function(){var selected=listItems&&listItems.filter("."+CLASSES_ACTIVE).removeClass(CLASSES_ACTIVE);return selected&&selected.length&&$.data(selected[0],"ac_data")},emptyList:function(){list&&list.empty()},unbind:function(){element&&element.remove()}}},$.Autocompleter.Selection=function(field,start,end){try{if(field.createTextRange){var selRange=field.createTextRange();selRange.collapse(!0),selRange.moveStart("character",start),selRange.moveEnd("character",end),selRange.select()}else field.setSelectionRange?field.setSelectionRange(start,end):field.selectionStart&&(field.selectionStart=start,field.selectionEnd=end);field.focus()}catch(e){}},$.Autocompleter.getCaretPosition=function(input){var start=0,end=0;if(document.getSelection||window.getSelection)start=input.selectionStart,end=input.selectionEnd;else if(document.selection)try{var range=document.selection.createRange();if(range&&range.parentElement()==input){var str=input.value,len=str.length,normalizedValue=str.replace(/\r\n/g,"\n"),textInputRange=input.createTextRange();textInputRange.moveToBookmark(range.getBookmark());var rangeEnd=input.createTextRange();rangeEnd.collapse(!1),textInputRange.compareEndPoints("StartToEnd",rangeEnd)>-1?start=end=len:(start=-textInputRange.moveStart("character",-len),start+=normalizedValue.slice(0,start).split("\n").length-1,textInputRange.compareEndPoints("EndToEnd",rangeEnd)>-1?end=len:(end=-textInputRange.moveEnd("character",-len),end+=normalizedValue.slice(0,end).split("\n").length-1))}}catch(er){}return{start:start,end:end}},$.Autocompleter.Translit=function(str,viceVersa){if(viceVersa=void 0!==viceVersa&&viceVersa){if(!_en2ru)for(var key in _en2ru={a:"а",b:"б",c:"ц",d:"д",e:"е",f:"ф",g:"ж",h:"х",i:"и",j:"ж",k:"к",l:"л",m:"м",n:"н",o:"о",p:"п",q:"к",r:"р",s:"с",t:"т",u:"у",v:"в",w:"в",x:"кс",y:"й",z:"з"})_en2ru[key.toUpperCase()]=_en2ru[key].toUpperCase()}else if(!_ru2en)for(var key in _ru2en={"а":"a","б":"b","в":"v","г":"g","д":"d","е":"e","ё":"jo","ж":"zh","з":"z","и":"i","й":"jj","к":"k","л":"l","м":"m","н":"n","о":"o","п":"p","р":"r","с":"s","т":"t","у":"u","ф":"f","х":"kh","ц":"c","ч":"ch","ш":"sh","щ":"shh","ъ":'"',"ы":"y","ь":"'","э":"eh","ю":"ju","я":"ja"})_ru2en[key.toUpperCase()]=_ru2en[key].toUpperCase();for(var a=str.split(""),i=0,l=a.length;i<l;i++)a[i]=viceVersa?_en2ru[a[i]]:_ru2en[a[i]];return a.join("")},$.Autocompleter.preg_quote=function(str){return(str||"").replace(/([\\\.\+\*\?\[\^\]\$\(\)\{\}=!<>\|:])/g,"\\$1")},$.Autocompleter.addressbook=function(node,loadAbjs){var $input=$(node),generateRegex=function(str){return new RegExp('(^|"|&lt;| )('+$.Autocompleter.preg_quote(str)+")","i")},options={parent:$(".ac-layer",$input.parent()),multiple:!0,matchContains:"word",cacheLength:1e3,delay:100,max:10,multipleSeparatorPattern:/(?:\s)?[,;](?:\s)?/g,highlight:function(str,sub,translit){var subTranslit,regExpTranslit;return(translit=void 0!==translit&&translit)&&(subTranslit=(subTranslit=function(sub){for(var newSub="",i=0;i<sub.length;i++){var currentSymbol=sub[i];_ru2en[currentSymbol]?newSub+=_ru2en[currentSymbol]:_en2ru[currentSymbol]?newSub+=_en2ru[currentSymbol]:newSub+=currentSymbol}return newSub}(sub)).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")),str=str.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),sub=sub.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),generateRegex(sub),regExpTranslit=generateRegex(subTranslit),function(res){if(!res)return!0;for(var i=0;i<res.length;i++)if(res[i])return!1;return!0}(str.match(regExpTranslit))?str.replace(new RegExp('(^|"|&lt;| )('+$.Autocompleter.preg_quote(sub)+")","i"),"$1<strong>$2</strong>"):str.replace(regExpTranslit,"$1<strong>$2</strong>")},filter:function(data){var items=$.Autocompleter.trimWords($input.val());return-1===$.inArray(data.value,$.map(items,$.trim))}};return $input.autocomplete(null,options),$input.bind("result",(function(){setTimeout($.proxy((function(){$(this).change(),this.scrollTop=this.scrollHeight}),this),10)})),loadAbjs&&this.abjs($input),$input}}},function(__webpack_require__){"use strict";var moduleId;moduleId=498,__webpack_require__(__webpack_require__.s=moduleId)}]);